bcr_test_module:
  module_path: "examples/httpserver"
  matrix:
    # No testing on windows, consider supporting! 
    bazel: [8.x]
  tasks:
    ubuntu2204:
      shell_commands:
      - wget https://packages.erlang-solutions.com/erlang-solutions_1.0_all.deb
      - sudo dpkg -i erlang-solutions_1.0_all.deb
      - sudo apt-get update
      - sudo apt-get install -y esl-erlang
      name: "Build/test module on Ubuntu"
      platform: ubuntu2204
      bazel: ${{ bazel }}
      build_targets:
      - "..."
      test_targets:
      - "..."
    macos:
      shell_commands:
      - /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
      - brew install erlang
      name: "Run test module on Mac OSX"
      platform: macos
      bazel: ${{ bazel }}
      build_targets:
      - "..."
      test_targets:
      - "..."
